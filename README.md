# list-checker-tauri

Tauri 2.0 を使用して開発された出席管理ソフトウェアです。  
=> https://github.com/TommyZ-7/list_checker

## 概要

このソフトウェアは、イベントや会議の出席管理を目的としたシステムです。  
Tauri アプリケーションはサーバー機能とイベント登録・モニタ機能を提供し、実際の出席登録はブラウザベースのウェブページから行います。  
複数のクライアントから同時にアクセスでき、リアルタイムで出席状況を同期します。

### アーキテクチャ

- **Tauri アプリケーション**: サーバー機能とイベント管理・モニタ機能
  - Socket.IO サーバー (ポート 50345)
  - HTTP サーバー (ポート 50080)
  - イベント作成・管理 UI
  - リアルタイムモニタ画面
- **ブラウザベース出席登録ページ**:
  - 任意のブラウザから `http://[IP]:50080/attendance.html` にアクセス
  - 学籍番号入力による出席登録
  - リアルタイムで出席状況を表示

## 機能

### イベント管理

- **イベント作成**: イベント名、説明、参加者リストを設定
- **参加者リストのインポート**: Excel (.xlsx) または CSV ファイルから参加者データを読み込み
- **モード選択**:
  - リストチェックモード: リストに登録されている参加者のみ出席可能
  - 受付モード: リスト外の参加者も受け付け可能
  - 登録モード: リストなしで参加者のみ登録
  - 定期学生総会用モード: 総会向けに最適化（委任状集計対応）

### 出席管理

- **リアルタイム出席登録**: 学籍番号入力で即時出席登録
- **当日参加**: 設定により当日参加者を許可・自動登録
- **出席状況表示**: 出席者数、出席率、統計情報のリアルタイム表示
- **参加者リスト**: 出席状態の視覚化（出席/未出席/委任状）

### ネットワーク機能

- **Socket.IO サーバー**: リアルタイムデータ同期（ポート 50345）
- **HTTP サーバー**: 静的ファイル配信（ポート 50080）
- **ブラウザベースアクセス**: 任意のブラウザから出席登録可能
- **複数クライアント対応**: 複数の PC から同時アクセス可能
- **ローカルネットワーク対応**: IP アドレス自動取得

### データ管理

- **データエクスポート**: Excel, CSV, JSON 形式で出席データをダウンロード
- **設定変更**: 当日参加許可、自動登録などの動的設定
- **データ永続化**: Sled データベースを使用したデータ保存

## 技術スタック

### フロントエンド

- **React 18**: UI フレームワーク
- **TypeScript**: 型安全
- **Vite**: ビルドツール
- **Yamada UI**: UI コンポーネントライブラリ
- **Socket.io-client**: リアルタイム通信
- **React Router**: ルーティング
- **Framer Motion**: アニメーション

### バックエンド

- **Tauri 2.0**: デスクトップアプリケーションフレームワーク
- **Rust**: システムプログラミング言語
- **Socketioxide**: WebSocket サーバー
- **Axum**: HTTP サーバー
- **Sled**: 組み込みデータベース
- **UUID**: 一意 ID 生成

## インストール

### 前提条件

- Node.js (Bun 推奨)
- Rust
- Windows/Linux/macOS

### インストール手順

1. リポジトリをクローン:

   ```bash
   git clone https://github.com/TommyZ-7/list-checker-tauri.git
   cd list-checker-tauri
   ```

2. 依存関係のインストール:

   ```bash
   bun install
   ```

3. Rust 依存関係のインストール:
   ```bash
   cd src-tauri
   cargo build
   cd ..
   ```

## 使用方法

### 開発モード

```bash
bun run dev
```

### ビルド

```bash
bun run build
```

### Tauri 開発

```bash
bun run tauri dev
```

### リリースビルド

```bash
bun run tauri build
```

## ソフトウェアの使い方

### 1. イベント作成（Tauri アプリケーション）

1. Tauri アプリケーションを起動
2. 「イベントを作成・管理する」を選択
3. 新しいイベントを作成
   - イベント名と説明を入力
   - 参加者リストを Excel または CSV からインポート
   - 動作モードを選択（リストチェック/受付/登録/総会モード）
   - 当日参加の設定を行う
4. イベント作成完了後、自動的にサーバーが起動
5. モニタ画面で出席登録ページの URL を確認

### 2. 出席登録（ブラウザ）

1. 任意のブラウザで出席登録ページにアクセス
   - URL: `http://[IPアドレス]:50080/attendance.html?uuid=[イベントID]&server=[IPアドレス]:50345`
   - または、モニタ画面の「出席登録ページを開く」ボタンをクリック
2. 学籍番号を入力して Enter キー
3. 出席が自動的に登録され、リアルタイムで反映

**複数 PC からの同時アクセス:**

- 各端末のブラウザで同じ URL にアクセス
- Tauri ソフトをインストールする必要なし
- すべての端末で出席状況がリアルタイム同期

### 3. モニタ機能（Tauri アプリケーション）

1. モニタ画面で出席状況をリアルタイム監視
2. 出席者数、出席率、統計情報を表示
3. 当日参加者リストも確認可能
4. 必要に応じて設定を変更（当日参加許可など）

### 4. データエクスポート（Tauri アプリケーション）

1. モニタ画面のメニューから「ダウンロード」を選択
2. Excel/CSV/JSON 形式を選択
3. 出席データと統計情報をダウンロード

## 設定オプション

### イベント設定

- **当日参加を許可**: リスト外の参加者を許可
- **自動で当日参加登録**: 当日参加者を自動登録
- **総会モード**: 定期学生総会用に最適化
- **リストを非表示**: 参加者リストを非表示

### システム設定

- **ポート番号**: Socket.IO 50345, HTTP 50080
- **ローカル IP**: 自動取得

## 開発

### 推奨 IDE 設定

- [VS Code](https://code.visualstudio.com/) + [Tauri](https://marketplace.visualstudio.com/items?itemName=tauri-apps.tauri-vscode) + [rust-analyzer](https://marketplace.visualstudio.com/items?itemName=rust-lang.rust-analyzer)

### プロジェクト構造

```
src/
├── App.tsx                 # メインアプリケーション
├── main.tsx               # エントリーポイント
├── create-room/           # イベント作成ページ
├── event/
│   └── monitor-page.tsx   # モニタ画面（Tauri用）
├── debug/                 # デバッグページ
└── lib/                   # ユーティリティ

src-tauri/
├── src/
│   ├── main.rs           # Rust エントリーポイント
│   ├── lib.rs            # Tauri コマンド定義
│   └── socket/
│       ├── mod.rs        # Socket.IO モジュール
│       └── server.rs     # Socket.IO + HTTPサーバー
├── static/
│   └── attendance.html   # ブラウザ用出席登録ページ
├── Cargo.toml            # Rust 依存関係
└── tauri.conf.json       # Tauri 設定
```

### ビルドプロセス

1. フロントエンド: Vite でビルド
2. バックエンド: Cargo でビルド
3. パッケージング: Tauri でネイティブバイナリ生成

## ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 貢献

バグ報告や機能リクエストは GitHub Issues へお願いします。

## バージョン履歴

- v0.7.0: アーキテクチャ変更（予定）

  - **Tauri アプリをサーバー・モニタ専用に変更**
  - **ブラウザベース出席登録ページの追加**
  - HTTP サーバー機能の追加（ポート 50080）
  - 複数クライアント対応の改善
  - クライアント側で Tauri ソフト不要に

- v0.6.0: 前バージョン
  - Tauri 2.0 対応
  - UI 改善
  - リアルタイム同期機能強化
